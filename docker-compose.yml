version: '3'

services:

    bot:
        image: ${TECHSUPPORT_BOT_IMAGE_TAG:-rtechsupport/techsupport-bot:prod}
        container_name: ${TECHSUPPORT_BOT_CONTAINER_NAME:-techsupport_bot}
        environment:
            - DEBUG=0
            - IPC_SECRET=${IPC_SECRET}
        restart: always
        stop_signal: SIGINT
        ports:
            - ${IPC_PORT:-8765}:8765
            - ${IPC_MULTICAST_PORT:-20000}:20000
        volumes:
            - ${TECHSUPPORT_BOT_HOST_CONFIG_PATH:-./config.yml}:/var/techsupport_bot/config.yml
        networks:
            - ipc
            - default
        
networks: 
    ipc:
        external: true